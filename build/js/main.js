function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _createForOfIteratorHelper(e,t){var n,r,o,c,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return o=!(r=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){o=!0,n=e},f:function(){try{r||null==i.return||i.return()}finally{if(o)throw n}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),c=0,{s:t=function(){},n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}(()=>{var c,n="https://fav-prom.com/api_forecast_poster",e=document.querySelectorAll(".authBtn"),r=document.querySelector(".counter"),o=document.querySelector(".events"),i=document.querySelector(".welcome__bet"),t=document.querySelector(".welcome__switch"),a=document.querySelector(".welcome__switch-btn"),s=document.querySelector("#ukLeng"),l=document.querySelector("#enLeng")?"en":s?"uk":"uk",u={},p={},h=[],y={};function d(){document.querySelectorAll("[data-translate]").forEach(function(e){var t=e.getAttribute("data-translate");e.innerHTML=w(t),e.removeAttribute("data-translate")}),"en"===l&&O.classList.add("en")}function w(e,t){return u[e]||(1<arguments.length&&void 0!==t?t:e)}"1"===localStorage.getItem("switcherActive")&&a.classList.add("active"),a.addEventListener("click",function(){a.style.pointerEvents="none",setTimeout(function(){a.style.pointerEvents=""},2e3);var o=a.classList.toggle("active");localStorage.setItem("switcherActive",o?"1":"0"),c&&S().then(function(t){if(o)h.forEach(function(e){_(e,p[e.matchId],t)});else{var e,n=_createForOfIteratorHelper(h);try{for(n.s();!(e=n.n()).done;){var r=e.value;g(r,p[r.matchId])}}catch(e){n.e(e)}finally{n.f()}}}).catch(function(e){return console.error("Error getting betslip items:",e)})});var m=function(e,t){return fetch(n+e,_objectSpread({headers:{Accept:"application/json","Content-Type":"application/json"}},t||{})).then(function(e){if(e.ok)return e.json();throw new Error("API error")}).catch(function(e){console.error("API request failed:",e);var t=e;return t={origin:window.location.href,userid:c,errorText:(null==t?void 0:t.error)||(null==t?void 0:t.text)||(null==t?void 0:t.message)||"Unknown error",type:(null==t?void 0:t.name)||"UnknownError",stack:(null==t?void 0:t.stack)||""},fetch("https://fav-prom.com/api-cms/reports/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(console.warn),document.querySelector(".fav__page").style.display="none",window.location.href.startsWith("https://www.favbet.hr/")?window.location.href="/promocije/promocija/stub/":window.location.href="/promos/promo/stub/",Promise.reject(e)})};function f(){d(),document.querySelector(".predictBtn").addEventListener("click",function(){c&&S().then(function(e){var t,n=_createForOfIteratorHelper(h);try{for(n.s();!(t=n.n()).done;){var r=t.value;_(r,p[r.matchId],e)}}catch(e){n.e(e)}finally{n.f()}}).catch(function(e){return console.error("Error getting betslip items:",e)})}),m("/matches").then(function(e){h=(e||[]).sort(function(e,t){return new Date(e.matchDate)-new Date(t.matchDate)}),S().then(function(e){for(var t,n,r,o,c,i,a=h,s=e,l=document.querySelector(".welcome__row"),u=(l.innerHTML="",0),d=0;d<a.length;d+=2){for(var m=document.createElement("div"),f=(m.className="welcome__row-wrap",function(){var t=a[v],n=document.createElement("div");n.className="welcome__item",t.matchId=+t.matchId,s.some(function(e){return e.event_id==t.matchId})&&(u++,n.classList.add("_done")),n.innerHTML='\n                <div class="welcome__item-close"></div>\n                <div class="welcome__item-row">\n                    <div class="welcome__item-title">\n                        <img src="https://fav-prom.com/html/forecast-poster/img/welcome/fav.svg" alt="FAVBET">\n                        <span>'.concat(w(t.title),'</span>\n                    </div>\n                    <div class="welcome__item-date">').concat((e=>(e=new Date(e),"".concat(String(e.getDate()).padStart(2,"0"),".").concat(String(e.getMonth()+1).padStart(2,"0"))))(t.matchDate),'</div>\n                </div>\n                <div class="welcome__item-max-title">').concat(w(t.team1)," â€“ ").concat(w(t.team2),'</div>\n                <div class="welcome__item-info">\n                    <div class="welcome__item-bid">').concat(w(t.outcomeTranslation),'</div>\n                    <div class="welcome__item-cof">').concat(t.defaultCoef||0,"</div>\n                </div>\n                "),p[t.matchId]=n,m.appendChild(n),function t(o){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(1<c)return;return fetch("/service/lineout/frontend_api2/",{method:"POST",body:JSON.stringify({jsonrpc:"2.0",id:16,method:"frontend/market/get",params:{by:{lang:"uk",service_id:c,event_id:o.matchId}}})}).then(function(e){return e.json()}).then(function(e){var n,r,e=e.result.filter(function(e){return e.market_name===o.marketName&&e.result_type_name===o.marketType});return e.length&&(r=n=null,e.some(function(e){var t=e.outcomes.find(function(e){return e.outcome_name===o.outcomeName});return!!t&&(n=t,r=e,!0)}),n)&&r?(e={outcomeId:n.outcome_id,outcomeCoef:n.outcome_coef,marketId:r.market_id,serviceId:c,matchId:o.matchId},y[o.matchId]=e):t(o,c+1)})}(t).then(function(e){e&&(n.querySelector(".welcome__item-cof").innerHTML=e.outcomeCoef)}),n.addEventListener("click",function(e){return _(t,n,s,e)}),n.querySelector(".welcome__item-close").addEventListener("click",function(e){e.stopPropagation(),g(t,n)})}),v=d;v<d+2&&v<a.length;v++)f();l.appendChild(m)}I(u),r=!1,o=document.getElementById("draggableContainer"),e=document.querySelectorAll(".welcome__row-wrap"),c=document.querySelector(".welcome__row"),i={5:"2098px",4:"1668px",3:"1258px",2:"828px",1:"418px",default:"2098px"},c.style.maxWidth=i[e.length]||i.default,o.addEventListener("mousedown",function(e){r=!0,t=e.pageX-o.offsetLeft,n=o.scrollLeft}),o.addEventListener("mouseleave",function(){return r=!1}),o.addEventListener("mouseup",function(){return r=!1}),o.addEventListener("mousemove",function(e){r&&(e.preventDefault(),e=2*(e.pageX-o.offsetLeft-t),o.scrollLeft=n-e)})}).catch(function(e){return console.error("Error getting betslip items:",e)})})}var v=!1;function _(t,e,n,r){c&&!n.some(function(e){return e.event_id===t.matchId||r&&r.target.classList.contains("welcome__item-close")})&&(n=y[t.matchId])&&n.matchId&&(v||(v=!0,m("/events",{method:"POST",body:JSON.stringify({userid:c,eventId:t.matchId})}).catch(console.error)),n=n,window.addBetslipOutcomes&&(n={serviceId:n.serviceId,eventId:n.matchId,marketId:n.marketId,outcomeId:n.outcomeId},window.addBetslipOutcomes([n])),e.classList.add("_done"),b(1),document.querySelectorAll(".welcome__item._done").length!==document.querySelectorAll(".welcome__item").length||a.classList.contains("active")||(a.classList.add("active"),localStorage.setItem("switcherActive","1")))}function g(e,t){c&&(e=y[e.matchId])&&e.matchId&&(e=e,!!window.removeBetslipItems)&&(e=e.outcomeId,window.removeBetslipItems([e]))&&(t.classList.remove("_done"),b(-1),a.classList.contains("active"))&&(a.classList.remove("active"),localStorage.setItem("switcherActive","0"))}function b(e){I(+r.innerHTML+e)}function I(e){var t=(r.innerHTML=e)%10;o.innerHTML=w(1==t?"event1":2<=t&&t<=4?"event2":"event3"),i.classList.toggle("hide",e<=0)}function S(){return window.getBetslipItems?window.getBetslipItems().then(function(e){return e}).catch(function(){return[]}):Promise.resolve([])}function L(){c?(e.forEach(function(e){return e.classList.add("hide")}),t.classList.remove("hide")):(t.classList.add("hide"),e.forEach(function(e){return e.classList.remove("hide")}))}document.addEventListener("click",function(e){e.target.closest(".welcome__item")&&!c&&(window.location.href="/login")});var O=document.querySelector(".fav__page");setTimeout(function(){return O.classList.add("overflow")},1e3),fetch("".concat(n,"/new-translates/").concat(l)).then(function(e){return e.json()}).then(function(e){u=e,d(),new MutationObserver(function(e){d()}).observe(document.getElementById("forecastPoster"),{childList:!0,subtree:!0})}).then(function(){var e,t,n;f(),window.store?(e=window.store.getState(),c=e.auth.isAuthorized&&e.auth.id||""):(t=0,n=setInterval(function(){t<50&&window.g_user_id?(c=window.g_user_id,L(),clearInterval(n)):t++},200)),L()})})();