"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var n,o,r,c,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return o=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){o=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(o)throw r}}};if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),c=0,{s:t=function(){},n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function ownKeys(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}!function(){var v,n="https://fav-prom.com/api_forecast_poster",a=document.querySelectorAll(".authBtn"),i=document.querySelectorAll(".predictBtn"),o=document.querySelector(".counter"),r=document.querySelector(".events"),c=document.querySelector(".welcome__bet"),e=document.querySelector("#ukLeng"),t=document.querySelector("#enLeng")?"en":e?"uk":"uk",s={},p={},y=[],h={};function l(){var e=document.querySelectorAll("[data-translate]");e&&e.length&&e.forEach(function(e){var t=e.getAttribute("data-translate");e.innerHTML=_(t),e.removeAttribute("data-translate")}),"en"===t&&I.classList.add("en")}function _(e,t){if(e)return t=t||e,s[e]||t}var u=function(e,t){return fetch(n+e,_objectSpread({headers:{Accept:"application/json","Content-Type":"application/json"}},t||{})).then(function(e){return e.json()})};function d(){l(),document.querySelector(".predictBtn").addEventListener("click",function(){v&&m().then(function(e){var t,n=_createForOfIteratorHelper(y);try{for(n.s();!(t=n.n()).done;){var o=t.value;g(o,p[o.matchId],e)}}catch(e){n.e(e)}finally{n.f()}}).catch(function(e){return console.error("Error getting betslip items:",e)})}),u("/matches").then(function(e){y=(e||[]).sort(function(e,t){return new Date(e.activeDate)-new Date(t.activeDate)}),m().then(function(e){for(var t=y,n=e,o=document.querySelector(".welcome__row"),c=(o.innerHTML="",0),r=0;r<t.length;r+=2){for(var a=document.createElement("div"),i=(a.className="welcome__row-wrap",function(){var o=t[s],r=document.createElement("div");r.className="welcome__item",o.matchId=+o.matchId,n.some(function(e){return e.event_id==o.matchId})&&(c++,r.classList.add("_done")),r.innerHTML='\n                <div class="welcome__item-close"></div>\n                <div class="welcome__item-row">\n                    <div class="welcome__item-title">\n                        <img src="https://fav-prom.com/html/forecast-poster/img/welcome/fav.svg" alt="FAVBET">\n                        <span>'.concat(_(o.title),'</span>\n                    </div>\n                    <div class="welcome__item-date">').concat(function(e){var t;if(e)return e=new Date(e),t=String(e.getDate()).padStart(2,"0"),e=String(e.getMonth()+1).padStart(2,"0"),"".concat(t,".").concat(e)}(o.matchDate),'</div>\n                </div>\n                <div class="welcome__item-max-title">').concat(_(o.team1)," – ").concat(_(o.team2),'</div>\n                <div class="welcome__item-info">\n                    <div class="welcome__item-bid">').concat(_(o.outcomeTranslation),'</div>\n                    <div class="welcome__item-cof">').concat(o.defaultCoef||0,"</div>\n                </div>\n            "),p[o.matchId]=r,a.appendChild(r),function n(o){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(1<r)return void console.log("No data for 0 and 1 service ids");return fetch("/service/lineout/frontend_api2/",{method:"POST",body:JSON.stringify({jsonrpc:"2.0",id:16,method:"frontend/market/get",params:{by:{lang:"uk",service_id:r,event_id:o.matchId}}})}).then(function(e){return e.json()}).then(function(e){var t,e=e.result.find(function(e){return e.market_name===o.marketName&&e.result_type_name===o.marketType});return e&&(t=e.outcomes.find(function(e){return e.outcome_name==o.outcomeName}))?{outcomeId:t.outcome_id,outcomeCoef:t.outcome_coef,marketId:e.market_id,serviceId:r,matchId:o.matchId}:n(o,r+1)}).then(function(e){return h[e.matchId]=e}).catch(function(e){console.log(e)})}(o).then(function(e){e?r.querySelector(".welcome__item-cof").innerHTML=e.outcomeCoef:console.log("No outcome data for ".concat(o.matchId))}),r.addEventListener("click",function(e){return g(o,r,n,e)}),r.querySelector(".welcome__item-close").addEventListener("click",function(e){var t,n;e.stopPropagation(),e=o,t=r,v&&((n=h[e.matchId])&&n.matchId?function(e){if(!window.removeBetslipItems)return console.log("Метод removeBetslipItems не знайдено"),!1;var t=e.outcomeId,e=window.removeBetslipItems([t]);e&&e instanceof Promise?e.then(function(){return console.log("Успішно видалено outcomeId ".concat(t))}).catch(function(e){return console.error("Помилка при видаленні outcomeId ".concat(t,":"),e)}):console.log("Метод повернув ".concat(e," для outcomeId ").concat(t));return e}(n)&&(t.classList.remove("_done"),w(-1)):console.log("No fav data for match id "+e.matchId))})}),s=r;s<r+2&&s<t.length;s++)i();o.appendChild(a)}b(c);var l,u,d=!1,m=document.getElementById("draggableContainer"),e=document.querySelectorAll(".welcome__row-wrap"),f=document.querySelector(".welcome__row");switch(e.length){case 5:f.style.maxWidth="2098px";break;case 4:f.style.maxWidth="1668px";break;case 3:f.style.maxWidth="1258px";break;case 2:f.style.maxWidth="828px";break;case 1:f.style.maxWidth="418px";break;default:f.style.maxWidth="2098px"}m.addEventListener("mousedown",function(e){d=!0,l=e.pageX-m.offsetLeft,u=m.scrollLeft}),m.addEventListener("mouseleave",function(){d=!1}),m.addEventListener("mouseup",function(){d=!1}),m.addEventListener("mousemove",function(e){d&&(e.preventDefault(),e=2*(e.pageX-m.offsetLeft-l),m.scrollLeft=u-e)})}).catch(function(e){return console.error("Error getting betslip items:",e)})})}function g(t,n,e,o){var r;o&&console.log("Target class list: "+o.target.classList),v&&!e.some(function(e){return e.event_id==t.matchId||o&&o.target.classList.contains("welcome__item-close")})&&((r=h[t.matchId])&&r.matchId?u("/events",{method:"POST",body:JSON.stringify({userid:v,eventId:t.matchId})}).then(function(e){var t;e.success?(console.log("Event created:",e.event),t=r,window.addBetslipOutcomes?(t={serviceId:t.serviceId,eventId:t.matchId,marketId:t.marketId,outcomeId:t.outcomeId},window.addBetslipOutcomes([t])):console.log("No addBetslipOutcomes method is defined"),n.classList.add("_done"),w(1)):console.error("Failed to create event:",e.error)}).catch(function(e){console.error("Error creating event:",e)}):console.log("No fav data for match id "+t.matchId))}function w(e){b(+o.innerHTML+e)}function b(e){var t=(o.innerHTML=e)%10,t=1==t?"event1":2<=t&&t<=4?"event2":"event3",t=_(t);r.innerHTML=t,0<e?c.classList.remove("hide"):c.classList.add("hide")}function m(){return window.getBetslipItems?window.getBetslipItems().then(function(e){return console.log("Betslip items:",e),e}).catch(function(e){return console.error("Error in getBetslipItems:",e),[]}):(console.log("No getBetslipItems method is defined"),Promise.resolve([]))}function f(){if(v){var e,t=_createForOfIteratorHelper(a);try{for(t.s();!(e=t.n()).done;)e.value.classList.add("hide")}catch(e){t.e(e)}finally{t.f()}document.querySelector(".predictBtn").classList.remove("hide"),document.querySelector(".welcome__row").classList.remove("hide")}else{var n,o=_createForOfIteratorHelper(i);try{for(o.s();!(n=o.n()).done;)n.value.classList.add("hide")}catch(e){o.e(e)}finally{o.f()}var r,c=_createForOfIteratorHelper(a);try{for(c.s();!(r=c.n()).done;)r.value.classList.remove("hide")}catch(e){c.e(e)}finally{c.f()}}}fetch("".concat(n,"/translates/").concat(t)).then(function(e){return e.json()}).then(function(e){s=e,l(),new MutationObserver(function(e){l()}).observe(document.getElementById("forecastPoster"),{childList:!0,subtree:!0})}).then(function(){var e,t;d(),window.store?(e=window.store.getState(),v=e.auth.isAuthorized&&e.auth.id||""):t=setInterval(function(){window.g_user_id&&(v=window.g_user_id,f(),clearInterval(t))},200),f()});var I=document.querySelector(".fav__page");setTimeout(function(){return I.classList.add("overflow")},1e3)}();